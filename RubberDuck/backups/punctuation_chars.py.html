<html>
<head>
<title>punctuation_chars.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #6897bb;}
.s5 { color: #629755; font-style: italic;}
.ln { color: #606366; font-weight: normal; font-style: normal; }
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
punctuation_chars.py</font>
</center></td></tr></table>
<pre><a name="l1"><span class="ln">1    </span></a><span class="s0">#!/usr/bin/env python</span>
<a name="l2"><span class="ln">2    </span></a><span class="s0"># -*- coding: utf-8 -*-</span>
<a name="l3"><span class="ln">3    </span></a><span class="s0"># :Id: $Id: punctuation_chars.py 8554 2020-09-04 16:52:11Z milde $</span>
<a name="l4"><span class="ln">4    </span></a><span class="s0"># :Copyright: © 2011, 2017 Günter Milde.</span>
<a name="l5"><span class="ln">5    </span></a><span class="s0"># :License: Released under the terms of the `2-Clause BSD license`_, in short:</span>
<a name="l6"><span class="ln">6    </span></a><span class="s0">#</span>
<a name="l7"><span class="ln">7    </span></a><span class="s0">#    Copying and distribution of this file, with or without modification,</span>
<a name="l8"><span class="ln">8    </span></a><span class="s0">#    are permitted in any medium without royalty provided the copyright</span>
<a name="l9"><span class="ln">9    </span></a><span class="s0">#    notice and this notice are preserved.</span>
<a name="l10"><span class="ln">10   </span></a><span class="s0">#    This file is offered as-is, without any warranty.</span>
<a name="l11"><span class="ln">11   </span></a><span class="s0">#</span>
<a name="l12"><span class="ln">12   </span></a><span class="s0"># .. _2-Clause BSD license: https://opensource.org/licenses/BSD-2-Clause</span>
<a name="l13"><span class="ln">13   </span></a><span class="s0">#</span>
<a name="l14"><span class="ln">14   </span></a><span class="s0"># This file is generated by</span>
<a name="l15"><span class="ln">15   </span></a><span class="s0"># ``docutils/tools/dev/generate_punctuation_chars.py``.</span>
<a name="l16"><span class="ln">16   </span></a><span class="s0"># ::</span>
<a name="l17"><span class="ln">17   </span></a>
<a name="l18"><span class="ln">18   </span></a><span class="s2">import </span><span class="s1">sys</span><span class="s2">, </span><span class="s1">re</span>
<a name="l19"><span class="ln">19   </span></a><span class="s2">import </span><span class="s1">unicodedata</span>
<a name="l20"><span class="ln">20   </span></a>
<a name="l21"><span class="ln">21   </span></a><span class="s3">&quot;&quot;&quot;Docutils character category patterns. 
<a name="l22"><span class="ln">22   </span></a> 
<a name="l23"><span class="ln">23   </span></a>   Patterns for the implementation of the `inline markup recognition rules`_ 
<a name="l24"><span class="ln">24   </span></a>   in the reStructuredText parser `docutils.parsers.rst.states.py` based 
<a name="l25"><span class="ln">25   </span></a>   on Unicode character categories. 
<a name="l26"><span class="ln">26   </span></a>   The patterns are used inside ``[ ]`` in regular expressions. 
<a name="l27"><span class="ln">27   </span></a> 
<a name="l28"><span class="ln">28   </span></a>   Rule (5) requires determination of matching open/close pairs. However, the 
<a name="l29"><span class="ln">29   </span></a>   pairing of open/close quotes is ambiguous due to  different typographic 
<a name="l30"><span class="ln">30   </span></a>   conventions in different languages. The ``quote_pairs`` function tests 
<a name="l31"><span class="ln">31   </span></a>   whether two characters form an open/close pair. 
<a name="l32"><span class="ln">32   </span></a> 
<a name="l33"><span class="ln">33   </span></a>   The patterns are generated by 
<a name="l34"><span class="ln">34   </span></a>   ``docutils/tools/dev/generate_punctuation_chars.py`` to  prevent dependence 
<a name="l35"><span class="ln">35   </span></a>   on the Python version and avoid the time-consuming generation with every 
<a name="l36"><span class="ln">36   </span></a>   Docutils run. See there for motives and implementation details. 
<a name="l37"><span class="ln">37   </span></a> 
<a name="l38"><span class="ln">38   </span></a>   The category of some characters changed with the development of the 
<a name="l39"><span class="ln">39   </span></a>   Unicode standard. The current lists are generated with the help of the 
<a name="l40"><span class="ln">40   </span></a>   &quot;unicodedata&quot; module of Python 2.7.13 (based on Unicode version 5.2.0). 
<a name="l41"><span class="ln">41   </span></a> 
<a name="l42"><span class="ln">42   </span></a>   .. _inline markup recognition rules: 
<a name="l43"><span class="ln">43   </span></a>      http://docutils.sf.net/docs/ref/rst/restructuredtext.html#inline-markup-recognition-rules 
<a name="l44"><span class="ln">44   </span></a>&quot;&quot;&quot;</span>
<a name="l45"><span class="ln">45   </span></a>
<a name="l46"><span class="ln">46   </span></a><span class="s1">openers = (</span><span class="s3">u'&quot;</span><span class="s2">\'</span><span class="s3">(&lt;</span><span class="s2">\\</span><span class="s3">[{</span><span class="s2">\u0f3a\u0f3c\u169b\u2045\u207d\u208d\u2329\u2768</span><span class="s3">'</span>
<a name="l47"><span class="ln">47   </span></a>           <span class="s3">u'</span><span class="s2">\u276a\u276c\u276e\u2770\u2772\u2774\u27c5\u27e6\u27e8\u27ea</span><span class="s3">'</span>
<a name="l48"><span class="ln">48   </span></a>           <span class="s3">u'</span><span class="s2">\u27ec\u27ee\u2983\u2985\u2987\u2989\u298b\u298d\u298f\u2991</span><span class="s3">'</span>
<a name="l49"><span class="ln">49   </span></a>           <span class="s3">u'</span><span class="s2">\u2993\u2995\u2997\u29d8\u29da\u29fc\u2e22\u2e24\u2e26\u2e28</span><span class="s3">'</span>
<a name="l50"><span class="ln">50   </span></a>           <span class="s3">u'</span><span class="s2">\u3008\u300a\u300c\u300e\u3010\u3014\u3016\u3018\u301a\u301d</span><span class="s3">'</span>
<a name="l51"><span class="ln">51   </span></a>           <span class="s3">u'</span><span class="s2">\u301d\ufd3e\ufe17\ufe35\ufe37\ufe39\ufe3b\ufe3d\ufe3f\ufe41</span><span class="s3">'</span>
<a name="l52"><span class="ln">52   </span></a>           <span class="s3">u'</span><span class="s2">\ufe43\ufe47\ufe59\ufe5b\ufe5d\uff08\uff3b\uff5b\uff5f\uff62</span><span class="s3">'</span>
<a name="l53"><span class="ln">53   </span></a>           <span class="s3">u'</span><span class="s2">\xab\u2018\u201c\u2039\u2e02\u2e04\u2e09\u2e0c\u2e1c\u2e20</span><span class="s3">'</span>
<a name="l54"><span class="ln">54   </span></a>           <span class="s3">u'</span><span class="s2">\u201a\u201e\xbb\u2019\u201d\u203a\u2e03\u2e05\u2e0a\u2e0d</span><span class="s3">'</span>
<a name="l55"><span class="ln">55   </span></a>           <span class="s3">u'</span><span class="s2">\u2e1d\u2e21\u201b\u201f</span><span class="s3">'</span><span class="s1">)</span>
<a name="l56"><span class="ln">56   </span></a><span class="s1">closers = (</span><span class="s3">u'&quot;</span><span class="s2">\'</span><span class="s3">)&gt;</span><span class="s2">\\</span><span class="s3">]}</span><span class="s2">\u0f3b\u0f3d\u169c\u2046\u207e\u208e\u232a\u2769</span><span class="s3">'</span>
<a name="l57"><span class="ln">57   </span></a>           <span class="s3">u'</span><span class="s2">\u276b\u276d\u276f\u2771\u2773\u2775\u27c6\u27e7\u27e9\u27eb</span><span class="s3">'</span>
<a name="l58"><span class="ln">58   </span></a>           <span class="s3">u'</span><span class="s2">\u27ed\u27ef\u2984\u2986\u2988\u298a\u298c\u298e\u2990\u2992</span><span class="s3">'</span>
<a name="l59"><span class="ln">59   </span></a>           <span class="s3">u'</span><span class="s2">\u2994\u2996\u2998\u29d9\u29db\u29fd\u2e23\u2e25\u2e27\u2e29</span><span class="s3">'</span>
<a name="l60"><span class="ln">60   </span></a>           <span class="s3">u'</span><span class="s2">\u3009\u300b\u300d\u300f\u3011\u3015\u3017\u3019\u301b\u301e</span><span class="s3">'</span>
<a name="l61"><span class="ln">61   </span></a>           <span class="s3">u'</span><span class="s2">\u301f\ufd3f\ufe18\ufe36\ufe38\ufe3a\ufe3c\ufe3e\ufe40\ufe42</span><span class="s3">'</span>
<a name="l62"><span class="ln">62   </span></a>           <span class="s3">u'</span><span class="s2">\ufe44\ufe48\ufe5a\ufe5c\ufe5e\uff09\uff3d\uff5d\uff60\uff63</span><span class="s3">'</span>
<a name="l63"><span class="ln">63   </span></a>           <span class="s3">u'</span><span class="s2">\xbb\u2019\u201d\u203a\u2e03\u2e05\u2e0a\u2e0d\u2e1d\u2e21</span><span class="s3">'</span>
<a name="l64"><span class="ln">64   </span></a>           <span class="s3">u'</span><span class="s2">\u201b\u201f\xab\u2018\u201c\u2039\u2e02\u2e04\u2e09\u2e0c</span><span class="s3">'</span>
<a name="l65"><span class="ln">65   </span></a>           <span class="s3">u'</span><span class="s2">\u2e1c\u2e20\u201a\u201e</span><span class="s3">'</span><span class="s1">)</span>
<a name="l66"><span class="ln">66   </span></a><span class="s1">delimiters = (</span><span class="s3">u'</span><span class="s2">\\</span><span class="s3">-/:</span><span class="s2">\u058a\xa1\xb7\xbf\u037e\u0387\u055a</span><span class="s3">-</span><span class="s2">\u055f\u0589</span><span class="s3">'</span>
<a name="l67"><span class="ln">67   </span></a>              <span class="s3">u'</span><span class="s2">\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c</span><span class="s3">'</span>
<a name="l68"><span class="ln">68   </span></a>              <span class="s3">u'</span><span class="s2">\u060d\u061b\u061e\u061f\u066a</span><span class="s3">-</span><span class="s2">\u066d\u06d4\u0700</span><span class="s3">-</span><span class="s2">\u070d</span><span class="s3">'</span>
<a name="l69"><span class="ln">69   </span></a>              <span class="s3">u'</span><span class="s2">\u07f7</span><span class="s3">-</span><span class="s2">\u07f9\u0830</span><span class="s3">-</span><span class="s2">\u083e\u0964\u0965\u0970\u0df4\u0e4f</span><span class="s3">'</span>
<a name="l70"><span class="ln">70   </span></a>              <span class="s3">u'</span><span class="s2">\u0e5a\u0e5b\u0f04</span><span class="s3">-</span><span class="s2">\u0f12\u0f85\u0fd0</span><span class="s3">-</span><span class="s2">\u0fd4\u104a</span><span class="s3">-</span><span class="s2">\u104f</span><span class="s3">'</span>
<a name="l71"><span class="ln">71   </span></a>              <span class="s3">u'</span><span class="s2">\u10fb\u1361</span><span class="s3">-</span><span class="s2">\u1368\u1400\u166d\u166e\u16eb</span><span class="s3">-</span><span class="s2">\u16ed\u1735</span><span class="s3">'</span>
<a name="l72"><span class="ln">72   </span></a>              <span class="s3">u'</span><span class="s2">\u1736\u17d4</span><span class="s3">-</span><span class="s2">\u17d6\u17d8</span><span class="s3">-</span><span class="s2">\u17da\u1800</span><span class="s3">-</span><span class="s2">\u180a\u1944\u1945</span><span class="s3">'</span>
<a name="l73"><span class="ln">73   </span></a>              <span class="s3">u'</span><span class="s2">\u19de\u19df\u1a1e\u1a1f\u1aa0</span><span class="s3">-</span><span class="s2">\u1aa6\u1aa8</span><span class="s3">-</span><span class="s2">\u1aad\u1b5a</span><span class="s3">-'</span>
<a name="l74"><span class="ln">74   </span></a>              <span class="s3">u'</span><span class="s2">\u1b60\u1c3b</span><span class="s3">-</span><span class="s2">\u1c3f\u1c7e\u1c7f\u1cd3\u2010</span><span class="s3">-</span><span class="s2">\u2017\u2020</span><span class="s3">-'</span>
<a name="l75"><span class="ln">75   </span></a>              <span class="s3">u'</span><span class="s2">\u2027\u2030</span><span class="s3">-</span><span class="s2">\u2038\u203b</span><span class="s3">-</span><span class="s2">\u203e\u2041</span><span class="s3">-</span><span class="s2">\u2043\u2047</span><span class="s3">-'</span>
<a name="l76"><span class="ln">76   </span></a>              <span class="s3">u'</span><span class="s2">\u2051\u2053\u2055</span><span class="s3">-</span><span class="s2">\u205e\u2cf9</span><span class="s3">-</span><span class="s2">\u2cfc\u2cfe\u2cff\u2e00</span><span class="s3">'</span>
<a name="l77"><span class="ln">77   </span></a>              <span class="s3">u'</span><span class="s2">\u2e01\u2e06</span><span class="s3">-</span><span class="s2">\u2e08\u2e0b\u2e0e</span><span class="s3">-</span><span class="s2">\u2e1b\u2e1e\u2e1f\u2e2a</span><span class="s3">-'</span>
<a name="l78"><span class="ln">78   </span></a>              <span class="s3">u'</span><span class="s2">\u2e2e\u2e30\u2e31\u3001</span><span class="s3">-</span><span class="s2">\u3003\u301c\u3030\u303d\u30a0</span><span class="s3">'</span>
<a name="l79"><span class="ln">79   </span></a>              <span class="s3">u'</span><span class="s2">\u30fb\ua4fe\ua4ff\ua60d</span><span class="s3">-</span><span class="s2">\ua60f\ua673\ua67e\ua6f2</span><span class="s3">-</span><span class="s2">\ua6f7</span><span class="s3">'</span>
<a name="l80"><span class="ln">80   </span></a>              <span class="s3">u'</span><span class="s2">\ua874</span><span class="s3">-</span><span class="s2">\ua877\ua8ce\ua8cf\ua8f8</span><span class="s3">-</span><span class="s2">\ua8fa\ua92e\ua92f\ua95f</span><span class="s3">'</span>
<a name="l81"><span class="ln">81   </span></a>              <span class="s3">u'</span><span class="s2">\ua9c1</span><span class="s3">-</span><span class="s2">\ua9cd\ua9de\ua9df\uaa5c</span><span class="s3">-</span><span class="s2">\uaa5f\uaade\uaadf\uabeb</span><span class="s3">'</span>
<a name="l82"><span class="ln">82   </span></a>              <span class="s3">u'</span><span class="s2">\ufe10</span><span class="s3">-</span><span class="s2">\ufe16\ufe19\ufe30</span><span class="s3">-</span><span class="s2">\ufe32\ufe45\ufe46\ufe49</span><span class="s3">-</span><span class="s2">\ufe4c</span><span class="s3">'</span>
<a name="l83"><span class="ln">83   </span></a>              <span class="s3">u'</span><span class="s2">\ufe50</span><span class="s3">-</span><span class="s2">\ufe52\ufe54</span><span class="s3">-</span><span class="s2">\ufe58\ufe5f</span><span class="s3">-</span><span class="s2">\ufe61\ufe63\ufe68\ufe6a</span><span class="s3">'</span>
<a name="l84"><span class="ln">84   </span></a>              <span class="s3">u'</span><span class="s2">\ufe6b\uff01</span><span class="s3">-</span><span class="s2">\uff03\uff05</span><span class="s3">-</span><span class="s2">\uff07\uff0a\uff0c</span><span class="s3">-</span><span class="s2">\uff0f\uff1a</span><span class="s3">'</span>
<a name="l85"><span class="ln">85   </span></a>              <span class="s3">u'</span><span class="s2">\uff1b\uff1f\uff20\uff3c\uff61\uff64\uff65</span><span class="s3">'</span><span class="s1">)</span>
<a name="l86"><span class="ln">86   </span></a><span class="s2">if </span><span class="s1">sys.maxunicode &gt;= </span><span class="s4">0x10FFFF</span><span class="s1">: </span><span class="s0"># &quot;wide&quot; build</span>
<a name="l87"><span class="ln">87   </span></a>    <span class="s1">delimiters += (</span><span class="s3">u'</span><span class="s2">\U00010100\U00010101\U0001039f\U000103d0\U00010857</span><span class="s3">'</span>
<a name="l88"><span class="ln">88   </span></a>                   <span class="s3">u'</span><span class="s2">\U0001091f\U0001093f\U00010a50</span><span class="s3">-</span><span class="s2">\U00010a58\U00010a7f</span><span class="s3">'</span>
<a name="l89"><span class="ln">89   </span></a>                   <span class="s3">u'</span><span class="s2">\U00010b39</span><span class="s3">-</span><span class="s2">\U00010b3f\U000110bb\U000110bc\U000110be</span><span class="s3">-'</span>
<a name="l90"><span class="ln">90   </span></a>                   <span class="s3">u'</span><span class="s2">\U000110c1\U00012470</span><span class="s3">-</span><span class="s2">\U00012473</span><span class="s3">'</span><span class="s1">)</span>
<a name="l91"><span class="ln">91   </span></a><span class="s1">closing_delimiters = </span><span class="s3">u'</span><span class="s2">\\\\</span><span class="s3">.,;!?'</span>
<a name="l92"><span class="ln">92   </span></a>
<a name="l93"><span class="ln">93   </span></a>
<a name="l94"><span class="ln">94   </span></a><span class="s0"># Matching open/close quotes</span>
<a name="l95"><span class="ln">95   </span></a><span class="s0"># --------------------------</span>
<a name="l96"><span class="ln">96   </span></a>
<a name="l97"><span class="ln">97   </span></a><span class="s1">quote_pairs = {</span><span class="s0"># open char: matching closing characters # usage example</span>
<a name="l98"><span class="ln">98   </span></a>               <span class="s3">u'</span><span class="s2">\xbb</span><span class="s3">'</span><span class="s1">:   </span><span class="s3">u'</span><span class="s2">\xbb</span><span class="s3">'</span><span class="s2">,         </span><span class="s0"># » » Swedish</span>
<a name="l99"><span class="ln">99   </span></a>               <span class="s3">u'</span><span class="s2">\u2018</span><span class="s3">'</span><span class="s1">: </span><span class="s3">u'</span><span class="s2">\u201a</span><span class="s3">'</span><span class="s2">,       </span><span class="s0"># ‘ ‚ Albanian/Greek/Turkish</span>
<a name="l100"><span class="ln">100  </span></a>               <span class="s3">u'</span><span class="s2">\u2019</span><span class="s3">'</span><span class="s1">: </span><span class="s3">u'</span><span class="s2">\u2019</span><span class="s3">'</span><span class="s2">,       </span><span class="s0"># ’ ’ Swedish</span>
<a name="l101"><span class="ln">101  </span></a>               <span class="s3">u'</span><span class="s2">\u201a</span><span class="s3">'</span><span class="s1">: </span><span class="s3">u'</span><span class="s2">\u2018\u2019</span><span class="s3">'</span><span class="s2">, </span><span class="s0"># ‚ ‘ German ‚ ’ Polish</span>
<a name="l102"><span class="ln">102  </span></a>               <span class="s3">u'</span><span class="s2">\u201c</span><span class="s3">'</span><span class="s1">: </span><span class="s3">u'</span><span class="s2">\u201e</span><span class="s3">'</span><span class="s2">,       </span><span class="s0"># “ „ Albanian/Greek/Turkish</span>
<a name="l103"><span class="ln">103  </span></a>               <span class="s3">u'</span><span class="s2">\u201e</span><span class="s3">'</span><span class="s1">: </span><span class="s3">u'</span><span class="s2">\u201c\u201d</span><span class="s3">'</span><span class="s2">, </span><span class="s0"># „ “ German „ ” Polish</span>
<a name="l104"><span class="ln">104  </span></a>               <span class="s3">u'</span><span class="s2">\u201d</span><span class="s3">'</span><span class="s1">: </span><span class="s3">u'</span><span class="s2">\u201d</span><span class="s3">'</span><span class="s2">,       </span><span class="s0"># ” ” Swedish</span>
<a name="l105"><span class="ln">105  </span></a>               <span class="s3">u'</span><span class="s2">\u203a</span><span class="s3">'</span><span class="s1">: </span><span class="s3">u'</span><span class="s2">\u203a</span><span class="s3">'</span><span class="s2">,       </span><span class="s0"># › › Swedish</span>
<a name="l106"><span class="ln">106  </span></a>              <span class="s1">}</span>
<a name="l107"><span class="ln">107  </span></a><span class="s3">&quot;&quot;&quot;Additional open/close quote pairs.&quot;&quot;&quot;</span>
<a name="l108"><span class="ln">108  </span></a>
<a name="l109"><span class="ln">109  </span></a><span class="s2">def </span><span class="s1">match_chars(c1</span><span class="s2">, </span><span class="s1">c2):</span>
<a name="l110"><span class="ln">110  </span></a>    <span class="s5">&quot;&quot;&quot;Test whether `c1` and `c2` are a matching open/close character pair. 
<a name="l111"><span class="ln">111  </span></a> 
<a name="l112"><span class="ln">112  </span></a>    Matching open/close pairs are at the same position in 
<a name="l113"><span class="ln">113  </span></a>    `punctuation_chars.openers` and `punctuation_chars.closers`. 
<a name="l114"><span class="ln">114  </span></a>    The pairing of open/close quotes is ambiguous due to  different 
<a name="l115"><span class="ln">115  </span></a>    typographic conventions in different languages, 
<a name="l116"><span class="ln">116  </span></a>    so we test for additional matches stored in `quote_pairs`. 
<a name="l117"><span class="ln">117  </span></a>    &quot;&quot;&quot;</span>
<a name="l118"><span class="ln">118  </span></a>    <span class="s2">try</span><span class="s1">:</span>
<a name="l119"><span class="ln">119  </span></a>        <span class="s1">i = openers.index(c1)</span>
<a name="l120"><span class="ln">120  </span></a>    <span class="s2">except </span><span class="s1">ValueError:  </span><span class="s0"># c1 not in openers</span>
<a name="l121"><span class="ln">121  </span></a>        <span class="s2">return False</span>
<a name="l122"><span class="ln">122  </span></a>    <span class="s2">return </span><span class="s1">c2 == closers[i] </span><span class="s2">or </span><span class="s1">c2 </span><span class="s2">in </span><span class="s1">quote_pairs.get(c1</span><span class="s2">, </span><span class="s3">u''</span><span class="s1">)</span>
<a name="l123"><span class="ln">123  </span></a></pre>
</body>
</html>